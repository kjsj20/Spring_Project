$(function() {
	$('#signUpUser').click(function() {
		if ($('#e_mail').val() == '') {
			alert('이메일을 입력해 주세요..');
		} else {
			if ($('#phone').val() == '') {
				alert('휴대전화 번호를 입력해 주세요..');
			} else {
				if ($('#birth_date').val() == '') {
					alert('생년월일을 입력해 주세요..');
				} else {
					if ($('#user_name').val() == '') {
						alert('이름을 입력해주세요..')
					} else {
						if ($('#password').val() == '') {
							alert('비밀번호를 입력해주세요..');
						} else {
							if ($('#passwordConfirm').val() == '') {
								alert('비밀번호 확인을 입력해주세요..');
							} else {
								if ($('#password').val() != $('#passwordConfirm').val()) {
									$('#pwCheck').text('');
									$('#pwCheck').html("비밀번호 확인이 일치하지 않습니다.");
								} else {
									$('#pwCheck').text('');
									$('#signUpComplete').text('');
									lodingPage('Packman.gif');
									signUp();
								}
							}
						}
					}
				}
			}
		}
	});
});

function signUp() {
	$.ajax({
		url: "/member/signup",
		type: "POST",
		data: $(".signup-form").serialize(),
		success: function(data){
			console.log(data);
			if(data == 0){
				$('#signUpComplete').html("<font color='#70AD47'>회원님의 메일로 인증메일을 발송 하였습니다. <br> 인증 완료후 로그인 해주세요.</font>");
			} else {
				$('#signUpComplete').html("<font color='#70AD47'>이미 중복된 아이디 입니다.. <br> 다시 한번 확인해주세요.. </font>");
			}
		},
		error: function(){
			alert('회원가입 에러 발생');
		}
	});
	
	/*$('.signup-form').attr({
		action: "/member/signup",
		method: "POST"
	});
	$('.signup-form').submit();*/
}

function lodingPage(imageName) {
    LoadingWithMask('/resources/images/Packman.gif');
    setTimeout("closeLoadingWithMask()", 3000);
}
 
function LoadingWithMask(gif) {
    //화면의 높이와 너비를 구합니다.
    var maskHeight = $('#registArea').height();
    var maskWidth  = window.document.body.clientWidth;
     
    //화면에 출력할 마스크를 설정해줍니다.
    var mask       ="<div id='mask' style='position:absolute; z-index:9000; background-color:#000000; display:none; left:0; top:0;'></div>";
    var loadingImg ='';
      
    loadingImg +="<div id='loadingImg'>";
    loadingImg +=" <img src='"+gif+"' style='position: relative; display: block; margin: 0px auto;'/>";
    loadingImg +="</div>"; 
  
    //화면에 레이어 추가
    $('#registArea')
        .append(mask)
        .append(loadingImg)
        
    //마스크의 높이와 너비를 화면 것으로 만들어 전체 화면을 채웁니다.
    $('#mask').css({
            'width' : maskWidth
            ,'height': maskHeight
            ,'opacity' :'0.3'
    });
  
    //마스크 표시
    $('#mask').show();  
  
    //로딩중 이미지 표시
    $('#loadingImg').show();
}


function closeLoadingWithMask() {
    $('#mask, #loadingImg').hide();
    $('#mask, #loadingImg').empty(); 
}
