package com.jscompany.springproject.model.lecture.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.jscompany.springproject.model.domain.lecture.Section;
import com.jscompany.springproject.model.domain.lecture.Section_detail;
import com.jscompany.springproject.model.lecture.repository.SectionDAO;
import com.jscompany.springproject.model.lecture.repository.Section_DetailDAO;

@Service
public class SectionServiceImpl implements SectionService{

	@Autowired
	private SectionDAO sectionDAO;
	
	@Autowired
	private Section_DetailDAO section_DetailDAO;
	
	public void regist(Section section, Section_detail section_detail,List<String> classList,List<String> urlList,List<Integer> countList ,List<String> sectionList) throws Exception {
		int count = 0;
		int countsize = 0;
		for(int i =0; i < sectionList.size(); i++) {
			section.setSection_name(sectionList.get(i));
			sectionDAO.insert(section);
			section_detail.setSection_id(section.getSection_id());
			if(countsize == 0) {
				countsize = countList.get(i);
			}
			for(int j=count; j < countsize; j++) {
				 section_detail.setSection_detail_name(classList.get(i));
				 section_detail.setSection_lectureurl(urlList.get(i));
				 
				 section_DetailDAO.insert(section_detail);
				 count++;
			}
			if(count != countList.size()) {
				countsize = countsize + (countList.get(i+1) - 1);				
			}
		}
	}

}
